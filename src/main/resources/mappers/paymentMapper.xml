<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

 <mapper namespace="com.sbland.payment.mapper.PaymentMapper">
 	<select id="selectPaymentByImpUid"
 			resultType="com.sbland.payment.domain.Payment">
 			SELECT
 				`id`
				,`imp_uid`
				,`merchant_uid`
				,`order_id`
				,`user_id`
				,`amount`
				,`payment_method`
				,`status`
				,`paid_at`
				,`cancel_reason`
				,`created_at`
				,`updated_at`
			FROM
				`payment`
			WHERE
				`imp_uid` = #{impUid}	
 	</select>
 	<select id="selectPaymentByMerchantUid"
 			resultType="com.sbland.payment.domain.Payment">
 			SELECT
 				`id`
				,`imp_uid`
				,`merchant_uid`
				,`order_id`
				,`user_id`
				,`amount`
				,`payment_method`
				,`status`
				,`paid_at`
				,`cancel_reason`
				,`created_at`
				,`updated_at`
			FROM
				`payment`
			WHERE
				`merchant_uid` = #{merchantUid}	
 	</select>
 	<select id="selectPaymentByUserId"
 			resultType="com.sbland.payment.domain.Payment">
 			SELECT
 				`id`
				,`imp_uid`
				,`merchant_uid`
				,`order_id`
				,`user_id`
				,`amount`
				,`payment_method`
				,`status`
				,`paid_at`
				,`cancel_reason`
				,`created_at`
				,`updated_at`
			FROM
				`payment`
			WHERE
				`user_id` = #{userId}	
 	</select>
 	<insert id="insertPayment">
 		INSERT INTO `payment` 
 		(
 			`imp_uid`
			,`merchant_uid`
			,`order_id`
			,`user_id`
			,`amount`
			,`payment_method`
			,`status`
			,`paid_at`
			,`cancel_reason`
			,`created_at`
			,`updated_at`
 		)
 		VALUES
 		(
 			#{impUid}
 			,#{merchantUid}
 			,#{orderId}
 			,#{userId}
 			,#{amount}
 			,#{paymentMethod}
 			,#{status}
 			,#{paidAt}
 			,#{cancelReason}
 			,NOW()
 			,NOW()
 		)
 	
 	</insert>
 
 </mapper>